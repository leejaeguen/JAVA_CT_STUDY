```
import java.util.*;

public class Main {
    static boolean[] vis;
    static int[] res = new int[100007];
    static ArrayList<Integer>[] arr;
    static int n,m,r;

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        n = sc.nextInt();
        m = sc.nextInt();
        r = sc.nextInt();
        arr = new ArrayList[100007];
        for(int i=0;i<=100000;i++)arr[i]=new ArrayList<>();
        vis = new boolean[100007];

        for(int i=0;i<m;i++){
            int a = sc.nextInt();
            int b = sc.nextInt();
            arr[a].add(b);
            arr[b].add(a);
        }

        bfs(r);
        for(int i=1;i<=n;i++) System.out.println(res[i]);
    }

    private static void bfs(int start) {
        Queue<Integer> q = new LinkedList<>();
        q.offer(start);
        vis[start] = true;
        int cnt=1;
        res[start]=cnt++;
        while (!q.isEmpty()) {
            int x = q.poll();
            Collections.sort(arr[x]);
            for (int i = 0; i < arr[x].size(); i++) {
                if(vis[arr[x].get(i)])continue;
                res[arr[x].get(i)]=cnt++;
                vis[arr[x].get(i)]=true;
                q.offer(arr[x].get(i));
            }
        }
    }
}
```
